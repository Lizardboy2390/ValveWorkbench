**************** uncommented deck **************

     1       1  test harness for biasing pentodes
     5       2  .param mu=31.9482
     6       3  .param kg1=998.437
     7       4  .param x=1.56336
     8       5  .param kp=167.091
     9       6  .param kvb=0.000248849
    10       7  .param kvb1=19.8172
    11       8  .param vct=0.0
    13       9  .param kg2=5655.41
    14      10  .param a=0.0
    15      11  .param alpha=0.249777
    16      12  .param beta=0.0643662
    17      13  .param gamma=0.798651
    19      14  .param kg2a=6709.55
    20      15  .param tau=0.434771
    21      16  .param rho=0.0547342
    22      17  .param theta=0.854024
    23      18  .param psi=4.91385
    25      19  .param omega=270.473
    26      20  .param lambda=63.8964
    27      21  .param nu=29.9968
    28      22  .param s=0.307751
    29      23  .param ap=0.00755009
    31      24  .param os=-0.000344448
    33     101  .op
    35     102  vb 1 0 dc 300
    37     103  rg 2 0 1meg
    38     104  rk 3 0 1.6k
    39     105  ra 1 4 100k
    40     106  rs 1 6 100k
    42     107  vm1 4 5 dc 0
    43     108  vm2 6 7 dc 0
     0      54  r.x1.r1 2 3 1g
     0      55  r.x1.r2 5 3 1g
     0      56  r.x1.r3 7 3 1g
     0      57  r.x1.r4 x1.1 3 1g
     0      58  r.x1.r5 x1.2 3 1g
     0      59  r.x1.r6 x1.3 3 1g
     0      60  r.x1.r7 x1.4 3 1g
     0      61  r.x1.r8 x1.d1 3 1g
     0      62  r.x1.r9 x1.d2 3 1g
     0      65  e.x1.e1 x1.1 3 x1.e1_int1 0 1
     0      67  b.x1.be1 x1.e1_int1 0 v= pow ( v(7,3) * ln (   1.0000000000e+00 + exp ( (    1.670910000000000e+02    ) * (   1.0000000000e+00 / (    3.194820000000000e+01    ) + ( v(2,3) + (    0.000000000000000e+00    ) ) / sqrt ( (    2.488490000000000e-04    ) + (    1.981720000000000e+01    ) * v(7,3) + v(7,3) ^   2.0000000000e+00 ) ) ) ) / (    1.670910000000000e+02    ) , (    1.563360000000000e+00    ) )
     0      70  e.x1.e5 x1.d1 3 x1.e5_int1 0 1
     0      72  b.x1.be5 x1.e5_int1 0 v= (    6.436620000000000e-02    ) * (   1.0000000000e+00 - (    2.497770000000000e-01    ) * v(2,3) ) * v(5,3)
     0      74  e.x1.e2 x1.2 3 x1.e2_int1 0 1
     0      76  b.x1.be2 x1.e2_int1 0 v= v(x1.d1,3) >   0.0000000000e+00 ? exp (  -1.0000000000e+00 * pow ( v(x1.d1,3) , (    7.986510000000000e-01    ) ) ) :   1.0000000000e+00
     0      79  e.x1.e6 x1.d2 3 x1.e6_int1 0 1
     0      81  b.x1.be6 x1.e6_int1 0 v= (    5.473420000000000e-02    ) * (   1.0000000000e+00 - (    4.347710000000000e-01    ) * v(2,3) ) * v(5,3)
     0      83  e.x1.e3 x1.3 3 x1.e3_int1 0 1
     0      85  b.x1.be3 x1.e3_int1 0 v= v(x1.d2,3) >   0.0000000000e+00 ? exp (  -1.0000000000e+00 * pow ( v(x1.d2,3) , (    8.540240000000000e-01    ) ) ) :   1.0000000000e+00
     0      88  e.x1.e4 x1.4 3 x1.e4_int1 0 1
     0      90  b.x1.be4 x1.e4_int1 0 v= (    3.077510000000000e-01    ) * v(5,3) * (   1.0000000000e+00 + tanh ( - (    7.550090000000000e-03    ) * ( v(5,3) - ( v(7,3) / (    6.389640000000000e+01    ) - (    2.999680000000000e+01    ) * v(2,3) - (    2.704730000000000e+02    ) ) ) ) )
     0      92  g.x1.ga 5 3 x1.ga_int1 0 1
     0      94  b.x1.bga x1.ga_int1 0 v= v(x1.1,3) * ( (   1.0000000000e+00 / (    9.984370000000000e+02    ) -   1.0000000000e+00 / (    5.655410000000000e+03    ) ) * (   1.0000000000e+00 - v(x1.2,3) ) + (    0.000000000000000e+00    ) * v(5,3) / (    5.655410000000000e+03    ) - v(x1.4,3) / (    5.655410000000000e+03    ) )
     0      96  g.x1.gs 7 3 x1.gs_int1 0 1
     0      98  b.x1.bgs x1.gs_int1 0 v= v(x1.1,3) * (   1.0000000000e+00 + (    4.913850000000000e+00    ) * v(x1.3,3) - (    0.000000000000000e+00    ) * v(5,3) + v(x1.4,3) ) / (    6.709550000000000e+03    )
    52     111  .end

****************** complete deck ***************

     1       1  test harness for biasing pentodes
     5       2  .param mu=31.9482
     6       3  .param kg1=998.437
     7       4  .param x=1.56336
     8       5  .param kp=167.091
     9       6  .param kvb=0.000248849
    10       7  .param kvb1=19.8172
    11       8  .param vct=0.0
    13       9  .param kg2=5655.41
    14      10  .param a=0.0
    15      11  .param alpha=0.249777
    16      12  .param beta=0.0643662
    17      13  .param gamma=0.798651
    19      14  .param kg2a=6709.55
    20      15  .param tau=0.434771
    21      16  .param rho=0.0547342
    22      17  .param theta=0.854024
    23      18  .param psi=4.91385
    25      19  .param omega=270.473
    26      20  .param lambda=63.8964
    27      21  .param nu=29.9968
    28      22  .param s=0.307751
    29      23  .param ap=0.00755009
    31      24  .param os=-0.000344448
     0      25  *global gnd
     2      26  *include pentode.cir
     1      27  * pentode model
     2      28  * default parameters are for an ef86
     3     100  *end of: pentode.cir
    33     101  .op
    35     102  vb 1 0 dc 300
    37     103  rg 2 0 1meg
    38     104  rk 3 0 1.6k
    39     105  ra 1 4 100k
    40     106  rs 1 6 100k
    42     107  vm1 4 5 dc 0
    43     108  vm2 6 7 dc 0
    45     109  *1 5 7 2 3 pentode
     0      30  *param mu=31.9482
     0      31  *param kg1=998.437
     0      32  *param x=1.56336
     0      33  *param kp=167.091
     0      34  *param kvb=0.000248849
     0      35  *param kvb1=19.8172
     0      36  *param vct=0.0
     0      37  *param kg2=5655.41
     0      38  *param a=0.0
     0      39  *param alpha=0.249777
     0      40  *param beta=0.0643662
     0      41  *param gamma=0.798651
     0      42  *param kg2a=6709.55
     0      43  *param tau=0.434771
     0      44  *param rho=0.0547342
     0      45  *param theta=0.854024
     0      46  *param psi=4.91385
     0      47  *param omega=270.473
     0      48  *param lambda=63.8964
     0      49  *param nu=29.9968
     0      50  *param s=0.307751
     0      51  *param ap=0.00755009
     0      52  *param os=-0.000344448
     0      53  *param  mu=31.9482 kg1=998.437 x=1.56336 kp=167.091 kvb=0.000248849 kvb1=19.8172 vct=0.0 kg2=5655.41 a=0.0 alpha=0.249777 beta=0.0643662 gamma=0.798651 kg2a=6709.55 tau=0.434771 rho=0.0547342 theta=0.854024 psi=4.91385 omega=270.473 lambda=63.8964 nu=29.9968 s=0.307751 ap=0.00755009 os=-0.000344448
     0      54  r.x1.r1 2 3 1g
     0      55  r.x1.r2 5 3 1g
     0      56  r.x1.r3 7 3 1g
     0      57  r.x1.r4 x1.1 3 1g
     0      58  r.x1.r5 x1.2 3 1g
     0      59  r.x1.r6 x1.3 3 1g
     0      60  r.x1.r7 x1.4 3 1g
     0      61  r.x1.r8 x1.d1 3 1g
     0      62  r.x1.r9 x1.d2 3 1g
     0      63  * epk
     0      64  *1 1 k   vol={pow(v(g2,k)*ln(1.0+exp(kp*(1.0/mu+(v(g1,k)+vct)/sqrt(kvb+kvb1*v(g2,k)+v(g2,k)^2))))/kp,x)}
     0      65  e.x1.e1 x1.1 3 x1.e1_int1 0 1
     0      66  *e1 e1_int1 0 v= pow(v(g2,k)*ln(1.0+exp(kp*(1.0/mu+(v(g1,k)+vct)/sqrt(kvb+kvb1*v(g2,k)+v(g2,k)^2))))/kp,x) 
     0      67  b.x1.be1 x1.e1_int1 0 v= pow ( v(7,3) * ln (   1.0000000000e+00 + exp ( (    1.670910000000000e+02    ) * (   1.0000000000e+00 / (    3.194820000000000e+01    ) + ( v(2,3) + (    0.000000000000000e+00    ) ) / sqrt ( (    2.488490000000000e-04    ) + (    1.981720000000000e+01    ) * v(7,3) + v(7,3) ^   2.0000000000e+00 ) ) ) ) / (    1.670910000000000e+02    ) , (    1.563360000000000e+00    ) )
     0      68  * g(va)
     0      69  *5 d1 k   vol={beta*(1.0-alpha*v(g1,k))*v(a,k)}
     0      70  e.x1.e5 x1.d1 3 x1.e5_int1 0 1
     0      71  *e5 e5_int1 0 v= beta*(1.0-alpha*v(g1,k))*v(a,k) 
     0      72  b.x1.be5 x1.e5_int1 0 v= (    6.436620000000000e-02    ) * (   1.0000000000e+00 - (    2.497770000000000e-01    ) * v(2,3) ) * v(5,3)
     0      73  *2 2 k   vol={v(d1,k)>0?exp(-1.0*pow(v(d1,k),gamma)):1}
     0      74  e.x1.e2 x1.2 3 x1.e2_int1 0 1
     0      75  *e2 e2_int1 0 v= v(d1,k)>0?exp(-1.0*pow(v(d1,k),gamma)):1 
     0      76  b.x1.be2 x1.e2_int1 0 v= v(x1.d1,3) >   0.0000000000e+00 ? exp (  -1.0000000000e+00 * pow ( v(x1.d1,3) , (    7.986510000000000e-01    ) ) ) :   1.0000000000e+00
     0      77  * h(va)
     0      78  *6 d2 k   vol={rho*(1.0-tau*v(g1,k))*v(a,k)}
     0      79  e.x1.e6 x1.d2 3 x1.e6_int1 0 1
     0      80  *e6 e6_int1 0 v= rho*(1.0-tau*v(g1,k))*v(a,k) 
     0      81  b.x1.be6 x1.e6_int1 0 v= (    5.473420000000000e-02    ) * (   1.0000000000e+00 - (    4.347710000000000e-01    ) * v(2,3) ) * v(5,3)
     0      82  *3 3 k   vol={v(d2,k)>0?exp(-1.0*pow(v(d2,k),theta)):1}
     0      83  e.x1.e3 x1.3 3 x1.e3_int1 0 1
     0      84  *e3 e3_int1 0 v= v(d2,k)>0?exp(-1.0*pow(v(d2,k),theta)):1 
     0      85  b.x1.be3 x1.e3_int1 0 v= v(x1.d2,3) >   0.0000000000e+00 ? exp (  -1.0000000000e+00 * pow ( v(x1.d2,3) , (    8.540240000000000e-01    ) ) ) :   1.0000000000e+00
     0      86  * psec
     0      87  *4 4 k   vol={s*v(a,k)*(1+tanh(-ap*(v(a,k)-(v(g2,k)/lambda-nu*v(g1,k)-omega))))}
     0      88  e.x1.e4 x1.4 3 x1.e4_int1 0 1
     0      89  *e4 e4_int1 0 v= s*v(a,k)*(1+tanh(-ap*(v(a,k)-(v(g2,k)/lambda-nu*v(g1,k)-omega)))) 
     0      90  b.x1.be4 x1.e4_int1 0 v= (    3.077510000000000e-01    ) * v(5,3) * (   1.0000000000e+00 + tanh ( - (    7.550090000000000e-03    ) * ( v(5,3) - ( v(7,3) / (    6.389640000000000e+01    ) - (    2.999680000000000e+01    ) * v(2,3) - (    2.704730000000000e+02    ) ) ) ) )
     0      91  *a a k   cur={v(1,k)*((1/kg1-1/kg2)*(1-v(2,k))+a*v(a,k)/kg2-v(4,k)/kg2)}
     0      92  g.x1.ga 5 3 x1.ga_int1 0 1
     0      93  *ga ga_int1 0 v= v(1,k)*((1/kg1-1/kg2)*(1-v(2,k))+a*v(a,k)/kg2-v(4,k)/kg2) 
     0      94  b.x1.bga x1.ga_int1 0 v= v(x1.1,3) * ( (   1.0000000000e+00 / (    9.984370000000000e+02    ) -   1.0000000000e+00 / (    5.655410000000000e+03    ) ) * (   1.0000000000e+00 - v(x1.2,3) ) + (    0.000000000000000e+00    ) * v(5,3) / (    5.655410000000000e+03    ) - v(x1.4,3) / (    5.655410000000000e+03    ) )
     0      95  *s g2 k   cur={v(1,k)*(1+psi*v(3,k)-a*v(a,k)+v(4,k))/kg2a}
     0      96  g.x1.gs 7 3 x1.gs_int1 0 1
     0      97  *gs gs_int1 0 v= v(1,k)*(1+psi*v(3,k)-a*v(a,k)+v(4,k))/kg2a 
     0      98  b.x1.bgs x1.gs_int1 0 v= v(x1.1,3) * (   1.0000000000e+00 + (    4.913850000000000e+00    ) * v(x1.3,3) - (    0.000000000000000e+00    ) * v(5,3) + v(x1.4,3) ) / (    6.709550000000000e+03    )
     0      99  *ends
    51     110  *end
    52     111  .end
